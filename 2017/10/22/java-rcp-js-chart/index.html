<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <title>Smark Home Site</title>
    <script src="https://use.fontawesome.com/21ae12a9ad.js"></script>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <script src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="col-md-3 col-sm-3  slide navbar-fixed-top">
		<header class="sidebar-header" role="banner">
				<a href="/">
					<img src="/img/1.jpg" class="img-circle">
				</a>
				<h3 class="title"> 
					<a href="/"></a>
			</h3>
			</header>

			<div id="bio" class="text-center">
				Software Engineer
			</div>

			<div id="contact-list" class="text-center">
				<ul class="list-unstyled list-inline">

					<li>
						<a class="btn btn-default btn-sm" target="_blank" href="https://github.com/smarkm">
							<i class="fa fa-github-alt fa-lg"></i>
						</a>
					</li>

					<li>
						<a class="btn btn-default btn-sm" target="_blank" href="mailto:smark@freecoop.net">
							<i class="fa fa-envelope fa-lg"></i>
						</a>
					</li>

					<li>
						<a class="btn btn-default btn-sm" target="_blank" href="https://twitter.com/smarkmeng">
							<i class="fa fa-twitter fa-lg"></i>
						</a>
					</li>
					<li>
						<a class="btn btn-default btn-sm" target="_blank" href="https://www.gitbook.com/@smarkm">
							<i class="fa fa-book fa-lg"></i>
						</a>
					</li>

				</ul>
			</div>
	</div>
	
   
    <div class="col-md-9 pull-right">
    				<div class="dropdown s-menu pull-right" >
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    <span class="glyphicon glyphicon-menu-hamburger"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
			    <li>
			    	<a href="/">
			    	<span class="glyphicon glyphicon-home"></span> 
			    	首页</a>
			    </li>
			     <li>
			    	<a href="/categories">
			    	<span class="glyphicon glyphicon-folder-open"></span> 
			    	分类</a>
			    </li>
			     <li>
			    	<a href="/tags" >
			    	<span class="glyphicon glyphicon-tags"></span> 
			    	标签</a>
			    </li>
			  </ul>
			</div>

		<h2  ><a class="post-title"  href="/2017/10/22/java-rcp-js-chart/">在RCP程序中使用JS Chart产品显示图表</a></h2>
<hr>
<div class="" style="margin-left:60px;">
     Sun Oct 22 2017 17:06:33 GMT+0800
     <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>虽然现在大部分系统都已经用Web来实现UI，但桌面程序在某些行业或者因为历史原因依然会存在下去，对于JAVA实现的桌面程序而言RCP还是占有一定比重的，基于Java的图表框架虽然有很多但是在使用和体验上来说还是和JS等web技术实现的图表框架或技术有一定差距，本文将为在RCP程序中集成JS等技术实现的图表提供一个思路。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>RCP提供了一个内置的Browser（实际上是SWT提供的）我们可以通过内嵌Browser来展示图表，这样我们就可以在RCP程序中展示和Web上一样简洁漂亮的图表，同时也有助于我们调试和调整图表的展示效果。</p>
<h2 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h2><p><img src="/imgs/rcp-js-chart.png" alt="image"></p>
<h2 id="数据传递"><a href="#数据传递" class="headerlink" title="数据传递"></a>数据传递</h2><p>我们都知道通过url参数的形式进行数据传递长度是有限制的，如果不通过server端我们是没办法使用post来进行数据传递，所以我们需要找到一种方法进行数据传递，以满足数据量大的情况。查看browser的API我们发现browser提供了执行javascript的方法<code>execute(script)</code>,同时提供了注册关于html处理过程的监听方法<code>addProgressListener(listener)</code>,我们可以在页面加载完成时去执行javascrip来进行数据传递，html通过javascrip来接受处理数据，主要实现代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">browser.setUrl(templateUrl);</div><div class="line">browser.addProgressListener(<span class="keyword">new</span> ProgressAdapter()&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completed</span><span class="params">(ProgressEvent event)</span> </span>&#123;</div><div class="line">		String data = <span class="string">"json or string data"</span>;</div><div class="line">		<span class="comment">//调用html页面的dataHandle(data) javascript 函数接受处理数据</span></div><div class="line">		browser.execute(<span class="string">"dataHandle('"</span>+data+<span class="string">"')"</span>); </div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<pre><code>这里只是提供了通过执行javascript的方法传递数据的思路，你可以根据自己的需要灵活的进行处理。
</code></pre>
     <hr>
     
     
     <div class="tags">
             <a href="tags">
                 <span class="glyphicon glyphicon-tags">&nbsp;</span> 
             </a><a href="/tags/JAVA/" class="button small">JAVA</a> <a href="/tags/RCP/" class="button small">RCP</a> <a href="/tags/Chart/" class="button small">Chart</a>
             &nbsp;
             <a href="categories">
                 <span class="glyphicon glyphicon-folder-open"></span> 
                 <a href="/categories/Java/" class="button small">Java</a>
             </a>
     </div>
 </div> 
		<div class="row"></div>
        <div class="container-fluid" style="text-algin:center;">
	        <footer id="footer">
  
  <div class="outer bottom">
    <div id="footer-info" class="inner">
      &copy; 2017 Smark
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261121789'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/stat.php%3Fid%3D1261121789%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
    </div>
  </div>
</footer>
        </div>
    </div>
    
</body>
</html>